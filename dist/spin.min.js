!function(){var t=0,e=["ms","moz","webkit","o"],a=0;for(a=0;a<e.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[e[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[a]+"CancelAnimationFrame"]||window[e[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var a=(new Date).getTime(),i=Math.max(0,16-(a-t)),n=window.setTimeout(function(){e(a+i)},i);return t=a+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var Spinner=function(t){var e;this.ms_per_frame=2.778;try{this.ctx=e=document.getElementById(t.canvas_id).getContext("2d")}catch(a){throw new Error("couldn't find <canvas> context, canvas id was: \""+t.canvas_id+'"')}if(this.width=e.canvas.width,this.max_radius=this.width/2,this.width!==e.canvas.height)throw new Error("<canvas> must be square, width must equal height.");this.segment_angle=t.segment_angle||30,this.segment_gap_angle=t.segment_gap_angle||0;var i=.66*this.max_radius;this.segment_radius=t.segment_radius?t.segment_radius>this.max_width?i:t.segment_radius:i,this.segment_depth=t.segment_depth||2,this.foreground=t.foreground||[221,72,20],this.background=t.background||[255,255,255],this.speed=t.speed||1};Spinner.prototype={play:function(){var t=this.ctx,e=this.max_radius;this.start=Date.now(),t.setTransform(1,0,0,1,0,0),t.translate(e,e),this.frame()},frame:function(){var t=this.ctx,e=Date.now(),a=e-this.start,i=Math.PI/180*(a/(1/this.speed*this.ms_per_frame));this.start=e,this.clear(),t.rotate(i),this._draw_cone();var n=this.frame.bind(this);this.animationFrame=window.requestAnimationFrame(n)},_rgba:function(t,e){var a;return a=t.concat(e),"rgba("+a.join()+")"},_draw_cone:function(){var t=this.ctx,e=this.segment_radius,a=Math.abs(this.segment_radius-this.segment_depth),i=this.segment_angle+this.segment_gap_angle,n=0,s=0;for(t.save();361>n;n+=i)s=n/360,t.fillStyle=this._rgba(this.foreground,s),this._draw_segment(this.segment_angle,a,e),t.rotate(Math.PI/180*i);t.restore()},_draw_segment:function(t,e,a){var i=this.ctx,n=Math.PI/180*t,s=Math.PI/180*270,r=s+n;i.beginPath(),i.moveTo(0,-e),i.lineTo(0,-a),i.arc(0,0,a,s,r),i.lineTo(Math.sin(n)*e,-(Math.cos(n)*e)),i.arc(0,0,e,r,s,!0),i.closePath(),i.fill()},clear:function(){var t=this.ctx;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.width,this.width),t.restore(),t.arc(0,0,this.max_radius-1,0,2*Math.PI),t.fillStyle=this._rgba(this.background,1),t.fill()},stop:function(){window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0}};